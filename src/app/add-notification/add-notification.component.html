<app-navbar></app-navbar>
<div class="container">
    <div>
        <h2>Ajouter une demande</h2>
    </div>
    <!-- Boutons pour afficher chaque partie du formulaire -->
    <div class="mb-3">
        <button type="button" (click)="showPart1 = true; showPart2 = false; showPart3 = false;" class="btn btn-primary">Demande Absence</button>
        <button type="button" (click)="showPart1 = false; showPart2 = true; showPart3 = false;" class="btn btn-primary">Demande Congé</button>
        <button type="button" (click)="showPart1 = false; showPart2 = false; showPart3 = true;" class="btn btn-primary">Demande pret</button>
    </div>

    <!-- Partie 1 du formulaire -->
    <div *ngIf="showPart1" class="row">
        <div class="col-sm-3">
            <div class="form-group">
                <label>Date de notification</label>
                <input type="date" [(ngModel)]="newNotification.dateDemande" name="dateDemande" class="form-control">
            </div>
            <div class="form-group">
                <label>Type<span style="color: red">*</span></label>
                <select [(ngModel)]="newNotification.type" name="type" class="form-control">
                    <option value="absence">Absence</option>
                    <option value="congé">Congé</option>
                    <option value="pret">Prêt</option>
                </select>
            </div>
            <div class="form-group">
                <label>État<span style="color: red">*</span></label>
                <select [(ngModel)]="newNotification.etat" name="etat" class="form-control">
                    <option value="en attente">En attente</option>
                </select>
            </div>
            <div class="form-group">
                <label>Personnel correspondant</label>
                <select [(ngModel)]="selectedPersonnel" name="personnel" class="form-control">
                    <option *ngFor="let personnel of personnels" [ngValue]="personnel">{{ personnel.nom }} {{ personnel.prenom + ' - ' + personnel.numCin}}</option>
                </select>
            </div>

            <div class="form-group">
                <label>Username</label>
                <input type="text" [(ngModel)]="newNotification.username" name="username" class="form-control">
            </div>

            <div class="form-group">
                <label>Période</label>
                <input type="text" [(ngModel)]="newNotification.periode" name="periode" class="form-control">
            </div>
        </div>
    </div>


    <!-- Partie 2 du formulaire -->
    <div *ngIf="showPart2" class="row">
        <div class="col-sm-3">
            <div class="form-group">
                <label>Date de notification</label>
                <input type="date" [(ngModel)]="newNotification.dateDemande" name="dateDemande" class="form-control">
            </div>
            <div class="form-group">
                <label>Type<span style="color: red">*</span></label>
                <select [(ngModel)]="newNotification.type" name="type" class="form-control">
                    <option value="absence">Absence</option>
                    <option value="congé">Congé</option>
                    <option value="pret">Prêt</option>
                </select>
            </div>
            <div class="form-group">
                <label>État<span style="color: red">*</span></label>
                <select [(ngModel)]="newNotification.etat" name="etat" class="form-control">
                    <option value="en attente">En attente</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>Personnel correspondant</label>
                <select [(ngModel)]="selectedPersonnel" name="personnel" class="form-control">
                    <option *ngFor="let personnel of personnels" [ngValue]="personnel">{{ personnel.nom }} {{ personnel.prenom + ' - ' + personnel.numCin}}</option>
                </select>
            </div>
            <div class="form-group">
                <label>Username</label>
                <input type="text" [(ngModel)]="newNotification.username" name="username" class="form-control">
            </div>

            <div class="form-group">
                <label>Date de début</label>
                <input type="date" [(ngModel)]="newNotification.dateDebut" name="dateDebut" class="form-control">
            </div>
            <div class="form-group">
                <label>Date de fin</label>
                <input type="date" [(ngModel)]="newNotification.dateFin" name="dateFin" class="form-control">
            </div>
        </div>
    </div>

    <!-- Partie 3 du formulaire -->
    <div *ngIf="showPart3" class="row">
        <div class="col-sm-3">
            <div class="form-group">
                <label>Date de notification</label>
                <input type="date" [(ngModel)]="newNotification.dateDemande" name="dateDemande" class="form-control">
            </div>
            <div class="form-group">
                <label>Type<span style="color: red">*</span></label>
                <select [(ngModel)]="newNotification.type" name="type" class="form-control">
                    <option value="absence">Absence</option>
                    <option value="congé">Congé</option>
                    <option value="pret">Prêt</option>
                </select>
            </div>
            <div class="form-group">
                <label>État<span style="color: red">*</span></label>
                <select [(ngModel)]="newNotification.etat" name="etat" class="form-control">
                    <option value="en attente">En attente</option>
                </select>
            </div>
            <div class="form-group">
                <label>Personnel correspondant</label>
                <select [(ngModel)]="selectedPersonnel" name="personnel" class="form-control">
                    <option *ngFor="let personnel of personnels" [ngValue]="personnel">{{ personnel.nom}} {{ personnel.prenom + ' - ' + personnel.numCin}}</option>
                </select>
            </div>

            <div class="form-group">
                <label>Username</label>
                <input type="text" [(ngModel)]="newNotification.username" name="username" class="form-control">
            </div>
            
            <div class="form-group">
                <label>Date de remise</label>
                <input type="date" [(ngModel)]="newNotification.dateRemise" name="dateRemise" class="form-control">
            </div>
            <div class="form-group">
                <label>Montant</label>
                <input type="number" [(ngModel)]="newNotification.montant" name="montant" class="form-control">
            </div>
        </div>
    </div>

    <!-- Bouton Ajouter -->
    <div class="mt-2">
        <button type="submit" (click)="addNotification()" class="btn btn-success">Ajouter</button>
    </div>
</div>